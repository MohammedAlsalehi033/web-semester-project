<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seats</title>
    <link rel="stylesheet" href="/styles/seats.css">
    <script src="../node_modules/jquery/dist/jquery.min.js"></script>
    <script type="module" src="js/seats.js"></script>
</head>

<body>
    <header id="header">
        <h1>Suhail</h1>
    </header>

    <div class="container">
        <aside>
            <a href="./tickets.html"><h1>Tickets</h1></a>
            <a href="./reports.html"><h1>Reports</h1></a>
            <a href="#"><h1>Profile</h1></a>
            <a href="./LoginPage.html"><h1>Sign out</h1></a>
        </aside>

        <section>
            <h1>Seat Layout</h1>
            <div id="seat-layout"></div>
        </section>
    </div>

    <script>
        $(document).ready(function() {
            const urlParams = new URLSearchParams(window.location.search);
            const ticketId = urlParams.get('ticketId');

            function fetchTicketDetails() {
                $.ajax({
                    type: 'GET',
                    url: `https://webproject-123-41fb57c20018.herokuapp.com/tickets/${ticketId}`,
                    success: function(ticket) {
                        renderSeats(ticket);
                    },
                    error: function(error) {
                        console.error('Error fetching ticket details:', error);
                    }
                });
            }

            function renderSeats(ticket) {
                const seatLayout = $('#seat-layout');
                const totalSeats = ticket.seats;
                const remainingSeats = ticket.remainingSeats;
                const bookedSeats = totalSeats - remainingSeats;

                for (let i = 1; i <= totalSeats; i++) {
                    const seatClass = i <= bookedSeats ? 'booked' : 'available';
                    seatLayout.append(`<div class="seat ${seatClass}">${i}</div>`);
                }
            }

            fetchTicketDetails();
        });
    </script>
</body>

</html>
